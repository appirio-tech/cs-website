CodeMirror.braceRangeFinder=function(a,b){var c=a.getLine(b),d=c.lastIndexOf("{");if(d<0||c.lastIndexOf("}")>d)return;var e=a.getTokenAt({line:b,ch:d}).className,f=1,g=a.lineCount(),h;i:for(var j=b+1;j<g;++j){var k=a.getLine(j),l=0;for(;;){var m=k.indexOf("{",l),n=k.indexOf("}",l);m<0&&(m=k.length),n<0&&(n=k.length),l=Math.min(m,n);if(l==k.length)break;if(a.getTokenAt({line:j,ch:l+1}).className==e)if(l==m)++f;else if(!--f){h=j;break i}++l}}if(h==null||h==b+1)return;return h},CodeMirror.newFoldFunction=function(a,b){function d(a,b){for(var d=0;d<c.length;++d){var e=a.lineInfo(c[d].start);if(!e)c.splice(d--,1);else if(e.line==b)return{pos:d,region:c[d]}}}function e(a,b){a.clearMarker(b.start);for(var c=0;c<b.hidden.length;++c)a.showLine(b.hidden[c])}var c=[];return b==null&&(b='<div style="position: absolute; left: 2px; color:#600">&#x25bc;</div>%N%'),function(f,g){f.operation(function(){var h=d(f,g);if(h)c.splice(h.pos,1),e(f,h.region);else{var i=a(f,g);if(i==null)return;var j=[];for(var k=g+1;k<i;++k){var l=f.hideLine(k);l&&j.push(l)}var m=f.setMarker(g,b),n={start:m,hidden:j};f.onDeleteLine(m,function(){e(f,n)}),c.push(n)}})}}